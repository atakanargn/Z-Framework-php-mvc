<div class="content">
    <div class="content-title">
        14. Ara katman yazılımları (Middlewares)
    </div>
    <div class="content-body">
        <div class="separate">
            <b>Açıklama;</b> Ara katman yazılımları bazı işlerimizi onaylamak ve önceden yapmamız gereken işleri
            baştan yapmamıza olanak sağlar.
            <br /><br />
            Yönlendirici üstünde kullanımı hatırlamak için <kbd data-route="route-2">buraya</kbd> tıklayınız.
        </div>

        <div class="separate">
            <h4># Bir Ara Katman Yazılımı neye benzer?</h4>
            <pre data-highlight-lang="php">
                namespace App\Middlewares;
                class Auth
                {
                    || Doğrulama aşaması.
                    public function __construct()
                    {
                        if (@$_SESSION['user_id']) return true;
                    }

                    || Eğer doğrulanmazsa vereceği hata.
                    public function error()
                    {
                        abort(401);
                    }
                }
            </pre>
        </div>

        <div class="separate">
            <h4># Kullanım</h4>
            Bu şekilde çağırıldığı taktirde hata var ise <kbd>Ara Katman Yazılımı</kbd>nın içerisindeki
            <kbd>error()</kbd> methodu çalışacaktır.
            <pre data-highlight-lang="php">
                Middleware::middleware([Auth::class, Guest::class]); || Bu kullanımın çıktısı her zaman `false` olacaktır.
                Middleware::middleware([Auth::class]);               || Kullanıcı eğer giriş yapmışsa değer `true` dönecektir. 
                Middleware::middleware([Guest::class]);              || Kullanıcı eğer giriş yapmamışsa değer `true` dönecektir. 
            </pre>
        </div>

        <div class="separate">
            <h4># Geri dönüşlü Kullanım</h4>
            Bu şekilde çağırıldığı taktirde hata var ise yazdığımız geri dönüş fonksiyonu çalışacaktır.
            <pre data-highlight-lang="php">
                Middleware::middleware([Auth::class, Guest::class], function($declined) {
                    print_r($declined);
                    if(count($declined)) return "Ara katman yazılımlarından her hangi birisi onaylanmadı.";

                    echo "Merhaba bütün ara katman yazılımları onaylandı!";
                });
            </pre>
            <div>
                Bu girdinin çıktısı:
                <pre data-highlight-lang="php">
                    Eğer giriş yapılmış ise veri Auth::class verisi `true` dönecektir,  ve Guest::class verisi `false` dönecektir. 
                    Eğer giriş yapılmamışsa veri Auth::class verisi `false` dönecektir, ve Guest::class verisi `true` dönecektir. 
                </pre>
            </div>

        </div>


    </div>
</div>
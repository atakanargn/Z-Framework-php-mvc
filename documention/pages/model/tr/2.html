<div class="content">
    <div class="content-title">
        2.2. Gözlemciler
    </div>
    <div class="content-body">
        <div class="separate" style="--separate-px: 40px;">
            <b>Açıklama;</b> <kbd>Observer</kbd> Modeller için önemli bir detaydır, Model içi detayları yakalamak için
            <kbd>Observer</kbd> kullanıyoruz.
        </div>
        <div>
            <div>
                <small>Nasıl bir <kbd>Observer</kbd> oluştururuz?</small>
            </div>
            <pre data-highlight-lang="php">
                # zhelper
                > php zhelper make observer UserObserver
            </pre>
        </div>
        <div>
            <div>
                <small>Örnek bir Model:</small>
            </div>
            <pre data-highlight-lang="php">
                class User extends Model
                {
                    use softDelete;

                    public $observe = UserObserver::class; -> Bunu yerleştirmemizdeki amaç hangi Observer`in Modelimizi dinleyeceğini belirtir.
                    
                    public $table = "users";

                    public function getAttributes()
                    {
                        return [$this->attributes, $this->attrCount];
                    }
                }
            </pre>
        </div>

        <div>
            <div>
                <small>Gözlemcimizin içi:</small>
            </div>
            <pre data-highlight-lang="php">
                class UserObserver extends Observer {
                    public function oninsert() {
                        echo "Veri yazılmadan öncesi";
                    }
            
                    public function oninserted(array $args) {
                        echo "Yazılan veri id'si: " . $args['id'];
                    }
            
                    public function onupdate(array $args) {
                        echo "Güncellenen veri: " . $args['id'];
                    }
            
                    public function onupdated(array $args) {
                        echo "Veri Güncellendi:";
                        print_r($args);
                    }
            
                    public function ondelete(array $args) {
                        echo "Siliniyor: " . $args['id'];
                    }
            
                    public function ondeleted(array $args) {
                        echo "Silindi:";
                        print_r($args);
                    }
                }
            </pre>
        </div>

        <div>
            Olarak Özetleyebiliriz.
        </div>
    </div>
</div>